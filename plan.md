
## 核心组件

### 1. View 层 (BoardUI)
- **职责**:
    - 处理用户输入（鼠标、键盘）
    - 渲染游戏界面
    - 显示游戏状态
    - 提供 SGF 文件选择界面
- **组件**:
    - `BoardWindow`: 主窗口
    - `BoardCanvas`: 画布组件
    - `GameControls`: 游戏控制面板
    - `SGFTools`: SGF 导入/导出界面

### 2. ViewModel 层 (Game)
- **职责**:
    - 处理游戏逻辑
    - 维护游戏状态
    - 验证落子
    - 计算胜负
    - 管理 SGF 导入/导出
- **组件**:
    - [Game](cci:2://file:///Users/zhangchaolong/CLionProjects/consoleGo/game.cpp:11:0-298:1): 游戏主逻辑
    - `GameState`: 游戏状态
    - `MoveValidator`: 落子验证器
    - `SGFParser`: SGF 文件解析器
    - `SGFBuilder`: SGF 文件生成器

### 3. EventBus
- **职责**:
    - 组件间通信
    - 事件派发
    - 事件订阅/发布
- **事件类型**:
    - 用户输入事件
    - 游戏状态更新事件
    - UI更新事件
    - SGF 导入/导出事件

## 开发计划

### 阶段1: SGF 支持
- [ ] 设计 SGF 数据结构
- [ ] 实现 SGF 解析器
- [ ] 实现 SGF 生成器
- [ ] 支持 SGF 变体
- [ ] 支持 SGF 注释和标记

### 阶段2: 基础架构搭建
- [ ] 初始化项目结构
- [ ] 实现基础 EventBus
- [ ] 创建基础窗口
- [ ] 实现基础绘图功能

### 阶段3: 核心游戏逻辑
- [ ] 实现棋盘数据模型
- [ ] 实现基本游戏规则
- [ ] 实现落子验证
- [ ] 实现打劫规则
- [ ] 实现胜负判定

### 阶段4: UI 实现
- [ ] 实现棋盘绘制
- [ ] 实现棋子绘制
- [ ] 实现基础交互
- [ ] 实现 SGF 导入/导出界面
- [ ] 实现游戏信息显示

### 阶段5: 游戏流程
- [ ] 实现游戏开始/结束
- [ ] 实现回合管理
- [ ] 实现悔棋功能
- [ ] 实现认输功能

### 阶段6: 高级功能
- [ ] 实现 AI 对战
- [ ] 实现网络对战
- [ ] 实现棋局分析
- [ ] 支持更多 SGF 特性